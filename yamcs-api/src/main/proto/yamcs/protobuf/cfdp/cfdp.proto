syntax="proto2";
  
option java_package = "org.yamcs.protobuf";

package yamcs.protobuf.cfdp;

enum TransferDirection {
    UPLOAD = 1;
    DOWNLOAD = 2;
}

enum TransferState {
   RUNNING = 1;
   PAUSED = 2;
   FAILED = 3;
   SUCCEEDED = 4;
}

message RemoteFile {
   required string filepath = 1;
   required bool isDirectory = 2;
}

//message sent as reponse to the info and also when starting a new transfer
message TransferInfo {
  optional uint64 transferId = 1;
  optional TransferState state = 2;

  optional string bucketInstance = 3;
  optional string bucketName = 4;
  optional string objectName = 5;

  optional string remotePath = 6;
  optional TransferDirection direction = 7;

  optional uint64 totalSize = 8;
  optional uint64 sizeTransferred = 9;
}

message CreateTransferRequest {
  message UploadOptions {
    optional bool overwrite = 1;
    optional bool createPath = 2;
    optional bool reliable = 3;
  }
  message DownloadOptions {
  }

  optional TransferDirection direction = 1;
  optional string bucketInstance = 2;
  optional string bucket = 3;
  optional string objectName = 4;
  optional string remotePath = 5;
  optional downloadOptions = 6;
  optional uploadOptions = 7;
}

//message sent as the response to the info transfers
message ListTransfersResponse {
  repeated TransferInfo transfer = 1;
}

//message sent as the response to the cancel transfers
message CancelTransfersResponse {
  repeated uint64 transfers = 1;
}

// message sent as the response to the pause transfers
message PausedTransfersResponse {
  repeated uint64 transfers = 1;
}

//message sent as the response to the resume transfers
message ResumedTransfersResponse {
  repeated uint64 transfers = 1;
}

//message sent as the reponse to the list call
message ListRemoteFilesResponse {
  required string remotePath = 1;
  repeated RemoteFile filepaths = 2;
}
