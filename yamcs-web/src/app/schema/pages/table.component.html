<ng-container *ngIf="table$ | async as table">
  <mat-toolbar>
    <mat-toolbar-row>
      <a routerLink="..">Tables</a> / {{ table.name }}
    </mat-toolbar-row>
  </mat-toolbar>

  <mat-tab-group>
    <mat-tab label="Columns">
      <h2>Key</h2>
      <table yaTable>
        <tr>
          <th width="150">Column</th>
          <th>Type</th>
        </tr>
        <tr *ngFor="let column of table.keyColumn">
          <td style="white-space: nowrap">{{ column.name }}</td>
          <td>{{ column.type }}</td>
        </tr>
      </table>

      <h2>Value</h2>
      <table yaTable>
        <tr>
          <th width="150">Column</th>
          <th>Type</th>
        </tr>
        <tr *ngFor="let column of table.valueColumn">
          <td style="white-space: nowrap">{{ column.name }}</td>
          <td>{{ column.type }}</td>
        </tr>
      </table>
    </mat-tab>

    <mat-tab label="Data">
      <table yaTable *ngIf="records$ | async as records">
        <tr>
          <th *ngFor="let column of table.keyColumn">{{ column.name }}</th>
          <th *ngFor="let column of table.valueColumn">{{ column.name }}</th>
        </tr>
        <tr *ngFor="let record of records">
          <td *ngFor="let column of table.keyColumn">
            {{ (getColumnValue(record, column.name) | value) || '-' }}
          </td>
          <td *ngFor="let column of table.valueColumn">
            {{ (getColumnValue(record, column.name) | value) || '-' }}
          </td>
        </tr>
      </table>
    </mat-tab>

    <mat-tab label="Script">
      <code [innerHTML]="formatSQL(table.script)"></code>
    </mat-tab>
  </mat-tab-group>
</ng-container>
