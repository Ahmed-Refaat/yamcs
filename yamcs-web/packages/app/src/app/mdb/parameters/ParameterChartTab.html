<ng-container *ngIf="parameter$ | async as parameter">
  <div style="padding-left: 12px; padding-right: 12px; padding-top: 12px">
    <div style="height: 24px; line-height: 24px;"
         *ngIf="range$ | async as range">
      <app-text-action icon="add_circle_outline">
        Comparison
      </app-text-action>
      <span style="border-right: 1px solid rgba(0, 0, 0, 0.12)"></span>
      <app-text-action (click)="chooseRange()" icon="date_range"
                       [active]="range === 'CUSTOM'">
        <span *ngIf="range !== 'CUSTOM'">Date Range</span>
        <ng-container *ngIf="customStart$ | async as customStart">
          <ng-container *ngIf="customStop$ | async as customStop">
            <span *ngIf="range === 'CUSTOM'">
              {{ customStart | datetime }} -  {{ customStop | datetime }}
            </span>
          </ng-container>
        </ng-container>
      </app-text-action>
      <app-text-action (click)="loadLatest('PT1H')"
                       [active]="range === 'PT1H'">
        1h
      </app-text-action>
      <app-text-action (click)="loadLatest('PT5H')"
                       [active]="range === 'PT5H'">
        5h
      </app-text-action>
      <app-text-action (click)="loadLatest('P1D')"
                       [active]="range === 'P1D'">
        1d
      </app-text-action>
      <app-text-action (click)="loadLatest('P1W')"
                       [active]="range === 'P1W'">
        1w
      </app-text-action>
      <app-text-action (click)="loadLatest('P1M')"
                       [active]="range === 'P1M'">
        1m
      </app-text-action>
      <app-text-action (click)="loadLatest('P3M')"
                       [active]="range === 'P3M'">
        3m
      </app-text-action>
      <app-text-action (click)="loadLatest('P1Y')"
                       [active]="range === 'P1Y'">
        1y
      </app-text-action>
    </div>
  </div>
  <div class="plot-container">
    <app-parameter-plot #plot
                        [xGrid]="true"
                        [xAxisHeight]="24"
                        [dataSource]="dataSource">
      <app-parameter-series [parameter]="parameter"
                            [grid]="true"></app-parameter-series>
    </app-parameter-plot>
    <div class="zoom-actions">
      <div class="zoom-actions-inner mat-elevation-z1">
        <button mat-button (click)="plot.zoomIn()">
          <mat-icon>add</mat-icon>
        </button>
        <span style="border-right: 1px solid rgba(0, 0, 0, 0.12)"></span>
        <button mat-button (click)="plot.zoomOut()">
          <mat-icon>remove</mat-icon>
        </button>
      </div>
    </div>
    <ng-container *ngIf="dataSource.data$ | async as data">
      <ng-container *ngIf="!(dataSource.loading$ | async)">
        <div class="no-data-message" *ngIf="data.samples.length === 0">
          <span class="mat-caption" *ngIf="range$ | async as range">
            There is no data for this chart in
            <ng-container [ngSwitch]="range">
              <span *ngSwitchCase="'PT1H'">the last hour</span>
              <span *ngSwitchCase="'PT6H'">the last 6 hours</span>
              <span *ngSwitchCase="'P1D'">the last 24 hours</span>
              <span *ngSwitchCase="'P1W'">the last week</span>
              <span *ngSwitchCase="'P1M'">the last month</span>
              <span *ngSwitchCase="'P3M'">the last three months</span>
              <span *ngSwitchCase="'P1Y'">the last year</span>
              <span *ngSwitchDefault>the selected range</span>
            </ng-container>
          </span>
        </div>
      </ng-container>
    </ng-container>
  </div>
</ng-container>
