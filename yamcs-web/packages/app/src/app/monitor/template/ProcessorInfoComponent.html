<ng-container *ngIf="connectionInfo$ | async as connectionInfo; else noConnection">
  <ng-container *ngIf="processor$ | async as processor">
    <div class="wrapper" [class.line1]="processor.replay">
      <span class="time" *ngIf="timeInfo$ | async as timeInfo">
        <span matTooltip="Processor">{{ connectionInfo.processor.name }}</span> /
        <span matTooltip="Mission Time">{{ timeInfo.currentTimeUTC | datetime }}</span>
        <br>
        <ng-container *ngIf="processor$ | async as processor">
          <div class="controls" *ngIf="processor.replay">
            <app-text-action><mat-icon>fast_rewind</mat-icon></app-text-action>

            <app-text-action *ngIf="processor.replayState === 'RUNNING'"
                            (click)="pauseReplay()">
              <mat-icon>pause</mat-icon>
            </app-text-action>

            <app-text-action *ngIf="processor.replayState === 'PAUSED'"
                            (click)="resumeReplay()">
              <mat-icon>play_arrow</mat-icon>
            </app-text-action>

            <app-text-action><mat-icon>fast_forward</mat-icon></app-text-action>
          </div>
        </ng-container>
      </span>
    </div>
  </ng-container>
</ng-container>

<ng-template #noConnection>
  <button mat-button color="warn">
    <mat-icon>warning</mat-icon>
    Attempting reconnection to Yamcs <app-dots color="#f44336"></app-dots>
  </button>
</ng-template>
